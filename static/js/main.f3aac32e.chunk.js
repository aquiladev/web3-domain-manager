(this["webpackJsonpweb3-domain-manager"]=this["webpackJsonpweb3-domain-manager"]||[]).push([[1],{464:function(e,n,t){},471:function(e,n){},483:function(e,n){},485:function(e,n){},494:function(e,n){},496:function(e,n){},521:function(e,n){},526:function(e,n){},528:function(e,n){},535:function(e,n){},548:function(e,n){},604:function(e,n,t){"use strict";t.r(n);var r=t(3),a=t(0),c=t.n(a),i=t(36),s=t.n(i),o=t(267),l=t.n(o),d=(t(464),t(21)),u=t(60),b=t(159),j=t(48),f=t(152),h=t(289),p=t(677),x=t(75),m=t(179),O=t(201),v=t(74),g=t(670),y=t(682),w=t(160),k=t(172),C=t(389),I=t(390);function N(){var e=Object(w.a)(["\n  html {\n    height: 100%\n  }\n  body {\n    height: 100%;\n    margin: 0px;\n    padding: 0px;\n  }\n  @font-face {\n    font-family: 'Averta';\n    src: local('Averta'), local('Averta Bold'),\n    url(",") format('woff2'),\n    url(",") format('woff');\n  }\n  #root {\n    height: 100%;\n  }\n  #records-form .MuiFilledInput-input {\n    padding-top: 13px;\n  }\n  .MuiFormControl-root,\n  .MuiInputBase-root {\n    width: 100% !important;\n  }\n  .MuiAccordionSummary-content {\n    overflow: auto;\n  }\n"]);return N=function(){return e},e}var S=Object(k.createGlobalStyle)(N(),C.a,I.a),T=t(394),F=t(678),E=t(680),R={1:{rpcUrl:"https://mainnet.infura.io/v3/3947c045ca5a4d68bff484fb038fb11c",linkedChainId:137,client:new F.a({uri:"https://api.thegraph.com/subgraphs/name/aquiladev/uns",cache:new E.a})},5:{rpcUrl:"https://goerli.infura.io/v3/3947c045ca5a4d68bff484fb038fb11c",linkedChainId:80001,client:new F.a({uri:"https://api.thegraph.com/subgraphs/name/aquiladev/uns-goerli",cache:new E.a})},137:{rpcUrl:"https://polygon-mainnet.infura.io/v3/3947c045ca5a4d68bff484fb038fb11c",linkedChainId:1,client:new F.a({uri:"https://api.thegraph.com/subgraphs/name/aquiladev/uns-polygon",cache:new E.a})},80001:{rpcUrl:"https://polygon-mumbai.infura.io/v3/3947c045ca5a4d68bff484fb038fb11c",linkedChainId:5,client:new F.a({uri:"https://api.thegraph.com/subgraphs/name/aquiladev/uns-mumbai",cache:new E.a})}},z=new m.a({supportedChainIds:[1,5,137,80001]}),_=new O.b({rpc:{1:R[1].rpcUrl,5:R[5].rpcUrl,137:R[137].rpcUrl,80001:R[80001].rpcUrl},qrcode:!0,pollingInterval:12e3}),M=new T.a({url:R[1].rpcUrl,appName:"Web3 Domain Manager",supportedChainIds:[1,5,137,80001]});var L=t(2),A=t.n(L),W=t(42),D=t(49),P=t(359),U=t(671),B=t(674),q=t(673),H=t(672),G=t(669),V=t(385),K=t(656),$=t(619),J=t(296),Y=t(418),X=t(406),Q=t.n(X),Z=t(155),ee=t(203),ne=t(204),te=t(396),re=t(397),ae=t(225),ce=t(657),ie=t(386),se=t(299),oe=t(298),le=t(301),de=t(398),ue=t.n(de),be=t(383),je=t(300),fe=t(264),he=t(652),pe=["Approval","NewURI","Transfer","Resolve","Sync","Set"],xe={1:"https://etherscan.io/",5:"https://goerli.etherscan.io/",137:"https://polygonscan.com/",80001:"https://mumbai.polygonscan.com/"},me="0x0000000000000000000000000000000000000000",Oe={1:"Mainnet",3:"Ropsten",4:"Rinkeby",5:"Goerli",8:"Ubiq",18:"ThundercoreTestnet",42:"Kovan",30:"Orchid",31:"OrchidTestnet",61:"Classic",77:"Sokol",99:"Core",100:"xDai",108:"Thundercore",122:"Fuse",137:"Polygon Mainnet",163:"Lightstreams",80001:"Polygon Mumbai"},ve=function(e){var n=e.address,t=e.chainId,a=e.label;return Object(r.jsx)(r.Fragment,{children:n===me?n:Object(r.jsx)(he.a,{href:"".concat(xe[t],"address/").concat(n),target:"_blank",rel:"noopener",children:a||n})})},ge=Object(h.a)((function(){return{header:{paddingTop:30}}})),ye=function(e){var n=e.domain,t=e.chainId,a=ge(),c=Object.entries((n||{}).records||[]).filter((function(e){var n=Object(d.a)(e,2);n[0];return!!n[1]})),i=c.map((function(e){var t=Object(d.a)(e,2),a=t[0],c=t[1];return Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)(Y.a,{style:{fontWeight:"bold"},noWrap:!0,children:a})}),Object(r.jsx)(K.a,{item:!0,sm:9,xs:12,children:Object(r.jsx)(Y.a,{noWrap:!0,children:c})})]},"".concat(n.id,"_").concat(a))}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)("b",{children:"ID"})}),Object(r.jsx)(K.a,{item:!0,sm:9,xs:12,children:Object(r.jsx)(Y.a,{noWrap:!0,children:n.id})})]}),Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)("b",{children:"Registry"})}),Object(r.jsx)(K.a,{item:!0,sm:9,xs:12,children:Object(r.jsx)(Y.a,{noWrap:!0,children:Object(r.jsx)(ve,{address:n.registry,chainId:t,label:n.registry})})})]}),Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)("b",{children:"Resolver"})}),Object(r.jsx)(K.a,{item:!0,sm:9,xs:12,children:Object(r.jsx)(Y.a,{noWrap:!0,children:Object(r.jsx)(ve,{address:n.resolver,chainId:t})})})]}),Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)("b",{children:"Owner"})}),Object(r.jsx)(K.a,{item:!0,sm:9,xs:12,children:Object(r.jsx)(Y.a,{noWrap:!0,children:Object(r.jsx)(ve,{address:n.owner,chainId:t})})})]}),c.length?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(K.a,{container:!0,item:!0,xs:12,children:Object(r.jsx)(Y.a,{className:a.header,variant:"subtitle1",children:"Records"})}),i]}):Object(r.jsx)(r.Fragment,{})]})},we=t(291),ke=t(295),Ce=t(294),Ie=t(290),Ne=t(292),Se=t(293),Te=function(e){var n=e.blockNumber,t=e.chainId;return Object(r.jsx)(he.a,{href:"".concat(xe[t],"block/").concat(n),target:"_blank",rel:"noopener",children:n})},Fe=function(e){var n=e.transactionHash,t=e.chainId;return Object(r.jsxs)(he.a,{href:"".concat(xe[t],"tx/").concat(n),target:"_blank",rel:"noopener",children:[n.substr(0,8),"..."]})},Ee=Object(h.a)((function(){return{header:{paddingTop:30},loader:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}}})),Re=function(e){switch(e.event){case"Transfer":return Object(r.jsx)(r.Fragment,{children:e.args.from===me?"Mint":e.args.to===me?"Burn":"Transfer"});default:return Object(r.jsx)(r.Fragment,{children:e.event})}},ze=function(e,n){var t=Object.keys(e.args).filter((function(e){return!+e&&"0"!==e})).reduce((function(n,t){return n[t]=e.args[t],n}),{});switch(e.event){case"Approval":return Object(r.jsxs)(r.Fragment,{children:["Approved operator ",e.args.approved," for token ",e.args.tokenId.toHexString()]});case"ApprovalForAll":return Object(r.jsxs)(r.Fragment,{children:[e.args.approved?"Approved":"Disapproved"," operator ",e.args.operator]});case"NewURI":return Object(r.jsx)(r.Fragment,{children:e.args.uri});case"Resolve":return Object(r.jsxs)(r.Fragment,{children:["Set resolver ",Object(r.jsx)(ve,{address:e.args.to,chainId:n})]});case"Sync":return Object(r.jsxs)(r.Fragment,{children:["Set record with key hash ",e.args.updateId.toHexString()," ",Object(r.jsxs)("div",{children:["(Resolver: ",Object(r.jsx)(ve,{address:e.args.resolver,chainId:n}),")"]})]});case"Transfer":return Object(r.jsxs)(r.Fragment,{children:["Transfer to ",Object(r.jsx)(ve,{address:e.args.to,chainId:n}),e.args.from!==me&&Object(r.jsxs)("div",{children:["(From: ",Object(r.jsx)(ve,{address:e.args.from,chainId:n}),")"]})]});default:return Object(r.jsx)(r.Fragment,{children:JSON.stringify(t,null,"  ")})}},_e=function(e){var n=e.events,t=e.chainId,a=Ee();return Object(r.jsxs)(r.Fragment,{children:[n&&n.isFetched&&Object(r.jsx)(Ie.a,{children:Object(r.jsxs)(we.a,{className:a.table,size:"small","aria-label":"a dense table",children:[Object(r.jsx)(Ne.a,{children:Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(Ce.a,{children:"Block"}),Object(r.jsx)(Ce.a,{children:"Tx"}),Object(r.jsx)(Ce.a,{align:"left",children:"Event"}),Object(r.jsx)(Ce.a,{align:"left",children:"Data"})]})}),Object(r.jsx)(ke.a,{children:n&&n.events.map((function(e,n){return Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(Ce.a,{component:"th",scope:"row",children:Object(r.jsx)(Te,{blockNumber:e.blockNumber,chainId:t})}),Object(r.jsx)(Ce.a,{component:"th",scope:"row",children:Object(r.jsx)(Fe,{transactionHash:e.transactionHash,chainId:t})}),Object(r.jsx)(Ce.a,{align:"left",children:Re(e)}),Object(r.jsx)(Ce.a,{align:"left",children:ze(e,t)})]},n)}))})]})}),n&&!n.isFetched&&Object(r.jsx)("div",{className:a.loader,children:Object(r.jsx)(J.a,{color:"inherit"})})]})},Me=Object(h.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},tabs:{width:"100%"}}})),Le=function(e){var n=e.children,t=e.display,a=(e.index,Object(ae.a)(e,["children","display","index"]));return Object(r.jsx)("div",Object(D.a)(Object(D.a)({role:"tabpanel",hidden:!t},a),{},{children:t&&Object(r.jsx)(fe.a,{children:n})}))},Ae=function(e){var n=e.chainId,t=e.isFetching,c=e.domains,i=e.onEventsLoad,s=e.onDomainSelect,o=e.actions,l=Me(),u=Object(a.useState)(!1),b=Object(d.a)(u,2),j=b[0],f=b[1],h=Object(a.useState)(void 0),p=Object(d.a)(h,2),x=p[0],m=p[1],O=Object(a.useState)({}),v=Object(d.a)(O,2),g=v[0],y=v[1];Object(a.useEffect)((function(){c&&1===c.length&&w(c[0])(void 0,!0)}),[c]);var w=function(e){return function(n,t){f(!!t&&e.id),m(e.id),s&&s(e)}},k=function(e){return function(){var n=Object(W.a)(A.a.mark((function n(t,r){var a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(e);case 2:a=n.sent,y(a),m(r);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)($.a,{className:l.backdrop,open:t,children:Object(r.jsx)(J.a,{color:"inherit"})}),c&&c.length?Object(r.jsx)("div",{children:c.map((function(e){return Object(r.jsxs)(ie.a,{expanded:j===e.id,onChange:w(e),disabled:e.loading,children:[Object(r.jsx)(oe.a,{expandIcon:e.loading?Object(r.jsx)(J.a,{size:18,thickness:5}):Object(r.jsx)(ue.a,{}),children:Object(r.jsx)(Y.a,{noWrap:!0,children:e.name||"[".concat(e.id,"]")})}),Object(r.jsx)(se.a,{children:x&&x.startsWith(e.id)&&Object(r.jsxs)("div",{className:l.tabs,children:[Object(r.jsxs)(be.a,{value:x,onChange:k(e),style:{marginBottom:20},children:[Object(r.jsx)(je.a,{label:"Info",value:e.id}),Object(r.jsx)(je.a,{label:"Events",value:"".concat(e.id,"_e")})]}),Object(r.jsx)(Le,{display:e.id===x,children:Object(r.jsx)(ye,{domain:e,chainId:n})}),Object(r.jsx)(Le,{display:"".concat(e.id,"_e")===x,children:Object(r.jsx)(_e,{events:g,chainId:n})})]})}),Object(r.jsx)(ce.a,{}),o&&Object(r.jsx)(le.a,{children:o})]},e.id)}))}):Object(r.jsx)(r.Fragment,{})]})},We=t(10),De=t(11),Pe=function(){function e(n,t,r){Object(We.a)(this,e),this.library=n,this.chainId=t,this.contract=r;var a=Z.networks[t].contracts,c=Object.values(a).find((function(e){return e.address.toLowerCase()===r.address.toLowerCase()}));if(!c)throw new Error("Config of contract ".concat(r.address," not found (chainId: ").concat(t,")"));this.config=c,this.onProgressObservers=[]}return Object(De.a)(e,[{key:"onProgress",value:function(e){this.onProgressObservers.push(e)}},{key:"fetchEvents",value:function(){var e=Object(W.a)(A.a.mark((function e(n){var t,r,a,c=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(this.contract.filters),r={Approval:function(e){return c.contract.filters.Approval(void 0,void 0,e)},NewURI:function(e){return c.contract.filters.NewURI(e)},Transfer:function(e){return c.contract.filters.Transfer(void 0,void 0,e)},Resolve:function(e){return c.contract.filters.Resolve(e)},Sync:function(e){return c.contract.filters.Sync(void 0,void 0,e)},Set:function(e){return c.contract.filters.Set(e)}},a=1,e.abrupt("return",Promise.all(pe.filter((function(e){return t.includes(e)})).map((function(e){var t=r[e](n.id);return c.contract.queryFilter(t,c.config.deploymentBlock).then(c._progress({loaded:a++,total:pe.length}))}))).then((function(e){return e.flat().sort((function(e,n){return e.blockNumber-n.blockNumber}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"fetchTransferEvents",value:function(){var e=Object(W.a)(A.a.mark((function e(n){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.contract.filters.Transfer(void 0,n),e.abrupt("return",this._fetchEvents(this.contract,t,parseInt(this.config.deploymentBlock,16)));case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"fetchNewURIEvents",value:function(){var e=Object(W.a)(A.a.mark((function e(n){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.contract.filters.NewURI(n),e.abrupt("return",this._fetchEvents(this.contract,t,parseInt(this.config.deploymentBlock,16)));case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"_fetchEvents",value:function(){var e=Object(W.a)(A.a.mark((function e(n,t,r,a){var c,i,s,o,l=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=l.length>4&&void 0!==l[4]?l[4]:1e6,a){e.next=5;break}return e.next=4,n.provider.getBlockNumber();case 4:a=e.sent;case 5:if(!(r>a)){e.next=7;break}return e.abrupt("return",[]);case 7:return i=Math.min(r+c,a),console.log("Fetching events blocks [".concat(n.address,": ").concat(r,"-").concat(i,"][limit: ").concat(c,"]")),e.prev=9,e.next=12,n.queryFilter(t,r,i);case 12:return s=e.sent,o=Math.min(Math.floor(2*c),1e6),e.t0=s,e.next=17,this._fetchEvents(n,t,i+1,a,o);case 17:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 21:if(e.prev=21,e.t2=e.catch(9),!e.t2.message.includes("query returned more than 10000 results")&&!e.t2.message.includes("timeout")){e.next=25;break}return e.abrupt("return",this._fetchEvents(n,t,r,a,Math.floor(c/10)));case 25:throw console.log("FAIL",e.t2),e.t2;case 27:case"end":return e.stop()}}),e,this,[[9,21]])})));return function(n,t,r,a){return e.apply(this,arguments)}}()},{key:"_progress",value:function(e){this.onProgressObservers.forEach((function(n){return n(e)}))}}]),e}();function Ue(e,n,t,r){var a=new v.a.providers.Web3Provider(e.provider).getSigner(),c=new v.a.Contract(r.address,t,a);return c.source=new Pe(e,n,c),c.source.onProgress(console.log),c}var Be=t(402),qe=t.n(Be);function He(e){return!!/^(0x)?[0-9a-f]{40}$/i.test(e)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(e)&&!/^(0x)?[0-9A-F]{40}$/.test(e))||function(e){e=e.replace("0x","");for(var n=qe()(e.toLowerCase()),t=0;t<40;t++)if(parseInt(n[t],16)>7&&e[t].toUpperCase()!==e[t]||parseInt(n[t],16)<=7&&e[t].toLowerCase()!==e[t])return!1;return!0}(e))}var Ge=t(104),Ve=t(420),Ke=t(403),$e=t.n(Ke),Je=t(405),Ye=t.n(Je),Xe=t(681),Qe=t(139),Ze=Object(h.a)((function(e){return{form:Object(u.a)({minWidth:600},e.breakpoints.down("sm"),{minWidth:"initial"}),record:{paddingTop:8,paddingBottom:8},recordKey:{fontWeight:"bold"},recordKeySelectContainer:{marginRight:10},recordKeySelect:{width:"100%"},recordValue:{display:"flex"},grow:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},actions:{display:"flex",paddingTop:20,paddingBottom:8}}})),en=function(e){var n=e.records,t=e.updating,c=e.error,i=e.onUpdate,s=e.onCancel,o=Ze(),l=Object(a.useState)(""),u=Object(d.a)(l,2),b=u[0],j=u[1],f=Object(a.useState)(""),h=Object(d.a)(f,2),p=h[0],x=h[1],m=Object(a.useState)({records:[],displayable:[],fillableKeys:[]}),O=Object(d.a)(m,2),v=O[0],g=O[1];Object(a.useEffect)((function(){var e=Object.entries(n).filter((function(e){var n=Object(d.a)(e,2);n[0];return!!n[1]})).map((function(e){var n=Object(d.a)(e,2),t=n[0],r=n[1];return{key:t,value:r,newValue:r}})),t=e.map((function(e){return e.key})),r=Object.keys(Qe.keys).filter((function(e){return!t.includes(e)}));g({records:e,displayable:e,fillableKeys:r})}),[n]);var w=function(e){return function(){var n=v.records.map((function(n){return n.key===e&&(n.newValue=void 0,n.muted=void 0!==n.value),n})),t=n.map((function(e){return e.key})),r=Object.keys(Qe.keys).filter((function(e){return!t.includes(e)}));g({records:n,displayable:n.filter((function(e){return!!e.newValue})),fillableKeys:r,muted:n.some((function(e){return e.muted}))})}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(K.a,{className:o.form,id:"records-form",children:[v.displayable.map((function(e){var n,t=e.key,a=e.newValue;return Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,className:o.record,children:[Object(r.jsx)(K.a,{item:!0,xs:12,className:o.recordKey,children:t}),Object(r.jsxs)(K.a,{item:!0,xs:12,className:o.recordValue,children:[Object(r.jsx)(V.a,{variant:"filled",defaultValue:a,size:"small",className:o.grow,onChange:(n=t,function(e){var t=e.target.value,r=v.records.map((function(e){return e.key===n&&(e.newValue=t,e.muted=e.value!==t),e})),a=r.map((function(e){return e.key})),c=Object.keys(Qe.keys).filter((function(e){return!a.includes(e)}));g({records:r,displayable:r.filter((function(e){return!!e.newValue})),fillableKeys:c,muted:r.some((function(e){return e.muted}))})})}),Object(r.jsx)(Ve.a,{"aria-label":"delete",onClick:w(t),children:Object(r.jsx)($e.a,{fontSize:"small"})})]})]},"".concat(t))})),Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,className:o.record,children:[Object(r.jsx)(K.a,{item:!0,sm:4,xs:12,children:Object(r.jsx)("div",{className:o.recordKeySelectContainer,children:Object(r.jsx)(Xe.a,{value:b,className:o.recordKeySelect,options:v.fillableKeys,onChange:function(e,n){j(n)},renderInput:function(e){return Object(r.jsx)(V.a,Object(D.a)(Object(D.a)({},e),{},{label:"Key",size:"small"}))}})})}),Object(r.jsxs)(K.a,{item:!0,sm:8,xs:12,className:o.recordValue,children:[Object(r.jsx)(V.a,{label:"Value",size:"small",className:o.grow,defaultValue:p,value:p,onChange:function(e){x(e.target.value)}}),Object(r.jsx)(Ve.a,{"aria-label":"add",disabled:!b,onClick:function(){if(b&&p){var e=[].concat(Object(Ge.a)(v.records),[{key:b,value:void 0,newValue:p,muted:void 0!==p}]),n=e.map((function(e){return e.key})),t=Object.keys(Qe.keys).filter((function(e){return!n.includes(e)}));g({records:e,displayable:e.filter((function(e){return!!e.newValue})),fillableKeys:t,muted:e.some((function(e){return e.muted}))}),x(""),j("")}},children:Object(r.jsx)(Ye.a,{fontSize:"small"})})]})]}),Object(r.jsx)(K.a,{children:c&&Object(r.jsx)(y.a,{severity:"error",style:{marginTop:10},children:c})}),Object(r.jsxs)(K.a,{className:o.actions,children:[Object(r.jsx)(P.a,{color:"primary",onClick:function(){s&&s()},children:"Cancel"}),Object(r.jsx)(P.a,{color:"primary",variant:"contained",disabled:!v.muted,onClick:function(){i&&i(v.records.filter((function(e){return e.muted})))},children:"Update"}),Object(r.jsx)("div",{className:o.grow})]})]}),Object(r.jsx)($.a,{className:o.backdrop,open:t,children:Object(r.jsx)(J.a,{color:"inherit"})})]})},nn=t(387),tn=Object(h.a)((function(e){return{form:Object(u.a)({minWidth:600},e.breakpoints.down("sm"),{minWidth:"initial"}),domainName:{display:"flex"},grow:{marginLeft:8,flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},prefix:{},actions:{display:"flex",paddingTop:20,paddingBottom:8}}})),rn=function(e){var n=e.minting,t=e.error,c=e.onMint,i=e.onCancel,s=tn(),o=Object(a.useState)(""),l=Object(d.a)(o,2),u=l[0],b=l[1],j=Object(a.useState)("0x0f4a10a4f46c288cea365fcf45cccf0e9d901b945b9829ccdb54c10dc3cb7a6f"),f=Object(d.a)(j,2),h=f[0],p=f[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(K.a,{className:s.form,children:[Object(r.jsxs)(K.a,{container:!0,item:!0,xs:12,children:[Object(r.jsx)(K.a,{item:!0,sm:3,xs:12,children:Object(r.jsx)(V.a,{disabled:!0,label:"Prefix",defaultValue:"udtestdev-",variant:"outlined",size:"small",className:s.prefix})}),Object(r.jsx)(K.a,{item:!0,sm:7,xs:12,className:s.domainName,children:Object(r.jsx)(V.a,{variant:"outlined",label:"Domain name",size:"small",className:s.grow,onChange:function(e){b(e.target.value)}})}),Object(r.jsx)(K.a,{item:!0,sm:2,xs:12,children:Object(r.jsxs)(V.a,{label:"TLD",size:"small",variant:"outlined",defaultValue:h,onChange:function(e){p(e.target.value)},className:s.grow,select:!0,children:[Object(r.jsx)(nn.a,{value:"0x0f4a10a4f46c288cea365fcf45cccf0e9d901b945b9829ccdb54c10dc3cb7a6f",children:".crypto"}),Object(r.jsx)(nn.a,{value:"0x1e3f482b3363eb4710dae2cb2183128e272eafbe137f686851c1caea32502230",children:".wallet"}),Object(r.jsx)(nn.a,{value:"0x042fb01c1e43fb4a32f85b41c821e17d2faeac58cfc5fb23f80bc00c940f85e3",children:".bitcoin"}),Object(r.jsx)(nn.a,{value:"0x241e7e2b7fd7333b3c0c049b326316b811af0c01cfc0c7a90b466fda3a70fc2d",children:".x"}),Object(r.jsx)(nn.a,{value:"0x5c828ec285c0bf152a30a325b3963661a80cb87641d60920344caf04d4a0f31e",children:".888"}),Object(r.jsx)(nn.a,{value:"0xb75cf4f3d8bc3deb317ed5216d898899d5cc6a783f65f6768eb9bcb89428670d",children:".nft"}),Object(r.jsx)(nn.a,{value:"0xb5f2bbf81da581299d4ff7af60560c0ac854196f5227328d2d0c2bb0df33e553",children:".dao"}),Object(r.jsx)(nn.a,{value:"0x4118ebbd893ecbb9f5d7a817c7d8039c1bd991b56ea243e2ae84d0a1b2c950a7",children:".blockchain"})]})})]}),Object(r.jsx)(K.a,{children:t&&Object(r.jsx)(y.a,{severity:"error",style:{marginTop:10},children:t})}),Object(r.jsxs)(K.a,{className:s.actions,children:[Object(r.jsx)(P.a,{color:"primary",onClick:function(){i&&i()},children:"Cancel"}),Object(r.jsx)(P.a,{color:"primary",variant:"contained",disabled:!u,onClick:function(){c&&c(h,u)},children:"Mint"}),Object(r.jsx)("div",{className:s.grow})]})]}),Object(r.jsx)($.a,{className:s.backdrop,open:n,children:Object(r.jsx)(J.a,{color:"inherit"})})]})},an=t(679);function cn(){var e=Object(w.a)(["\n      query filteredDomains($ids: [ID!]!) {\n        domains(where: { id_in: $ids }) {\n          id\n          name\n        }\n      }\n    "]);return cn=function(){return e},e}function sn(){var e=Object(w.a)(["\n      query GetDomain($id: ID!) {\n        domain(id: $id) {\n          id\n          name\n          registry\n          owner {\n            id\n          }\n          resolver {\n            address\n            records {\n              key\n              value\n            }\n          }\n        }\n      }\n    "]);return sn=function(){return e},e}function on(){var e=Object(w.a)(["\n      query GetAccount($id: ID!) {\n        account(id: $id) {\n          id\n          reverse {\n            id\n            name\n          }\n          domains {\n            id\n            name\n            registry\n            owner {\n              id\n            }\n            resolver {\n              address\n              records {\n                key\n                value\n              }\n            }\n          }\n        }\n      }\n    "]);return on=function(){return e},e}var ln=function(){var e=Object(W.a)(A.a.mark((function e(n,t){var r,a,c,i,s,o,l,d,u=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]&&u[2],n&&t){e.next=3;break}throw new Error("Invalid arguments [chainId: ".concat(n,", account: ").concat(t,"]"));case 3:if(a=R[n].client){e.next=6;break}throw new Error("Unsupported chain ".concat(n));case 6:return e.next=8,a.query({query:Object(an.a)(on()),variables:{id:String(t).toLowerCase()},fetchPolicy:r?"no-cache":void 0});case 8:if(c=e.sent,i=c.data,s=i.account){e.next=13;break}return e.abrupt("return",{});case 13:if(o=un(s.domains),!(l=o.filter((function(e){return!e.name})).map((function(e){return e.id}))).length){e.next=21;break}return e.next=18,jn(R[n].linkedChainId,l);case 18:d=e.sent,console.log("NO_NAME_DOMAINS",o.filter((function(e){return!e.name})).map((function(e){return e.id})),d),o.map((function(e){return!e.name&&d[e.id]&&(e.name=d[e.id]),e}));case 21:return e.abrupt("return",{id:s.id,domains:o});case 22:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),dn=function(){var e=Object(W.a)(A.a.mark((function e(n,t){var r,a,c,i,s,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]&&o[2],n&&t){e.next=3;break}throw new Error("Invalid arguments [chainId: ".concat(n,", tokenId: ").concat(t,"]"));case 3:if(a=R[n].client){e.next=6;break}throw new Error("Unsupported chain ".concat(n));case 6:return e.next=8,a.query({query:Object(an.a)(sn()),variables:{id:String(t).toLowerCase()},fetchPolicy:r?"no-cache":void 0});case 8:if(c=e.sent,i=c.data,s=i.domain){e.next=13;break}return e.abrupt("return",{});case 13:return e.abrupt("return",{id:s.id,name:s.name,owner:s.owner.id,registry:s.registry,resolver:(s.resolver||{}).address,records:bn(s.resolver)});case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),un=function(e){return e&&Array(e).length?Object.values(e).map((function(e){return{id:e.id,name:e.name,owner:e.owner.id,registry:e.registry,resolver:(e.resolver||{}).address,records:bn(e.resolver)}})):[]},bn=function(e){return e&&e.records?Object.values(e.records).reduce((function(e,n){return e[n.key]=n.value,e}),{}):{}},jn=function(){var e=Object(W.a)(A.a.mark((function e(n,t){var r,a,c,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R[n].client){e.next=3;break}throw new Error("Unsupported chain ".concat(n));case 3:return e.next=5,r.query({query:Object(an.a)(cn()),variables:{ids:t}});case 5:if(a=e.sent,c=a.data,i=c.domains){e.next=10;break}return e.abrupt("return",{});case 10:return e.abrupt("return",Object.values(i).reduce((function(e,n){return e[n.id]=n.name,e}),{}));case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),fn=c.a.forwardRef((function(e,n){return Object(r.jsx)(G.a,Object(D.a)({direction:"up",ref:n},e))})),hn=Object(h.a)((function(e){return{header:{display:"flex",padding:"10px 0"},form:Object(u.a)({minWidth:600,display:"flex"},e.breakpoints.down("sm"),{minWidth:"initial"}),grow:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},tabs:{width:"100%"},btn:{margin:"0 10px"},noDomains:{textAlign:"center"}}})),pn=function(e){var n=e.library,t=e.account,i=e.chainId,s=hn(),o="".concat(t,"_").concat(i),l=Object(a.useState)(Object(u.a)({},o,{isFetched:!1,domains:[]})),b=Object(d.a)(l,2),j=b[0],f=b[1],h=Object(a.useState)(!0),p=Object(d.a)(h,2),x=p[0],m=p[1],O=c.a.useState(void 0),w=Object(d.a)(O,2),k=w[0],C=w[1],I=Object(a.useState)(void 0),N=Object(d.a)(I,2),S=N[0],T=N[1],F=c.a.useState(void 0),E=Object(d.a)(F,2),R=E[0],z=E[1],_=c.a.useState(!1),M=Object(d.a)(_,2),L=M[0],G=M[1],X=c.a.useState(),ae=Object(d.a)(X,2),ce=ae[0],ie=ae[1],se=c.a.useState(void 0),oe=Object(d.a)(se,2),le=oe[0],de=oe[1],ue=c.a.useState(!1),be=Object(d.a)(ue,2),je=be[0],fe=be[1],he=Object(a.useState)(void 0),pe=Object(d.a)(he,2),xe=pe[0],Oe=pe[1],ve=c.a.useState(void 0),ge=Object(d.a)(ve,2),ye=ge[0],we=ge[1],ke=c.a.useState(!1),Ce=Object(d.a)(ke,2),Ie=Ce[0],Ne=Ce[1],Se=Object(a.useState)(!1),Te=Object(d.a)(Se,2),Fe=Te[0],Ee=Te[1],Re=Object(a.useState)(!1),ze=Object(d.a)(Re,2),_e=ze[0],Me=ze[1],Le=c.a.useState(void 0),We=Object(d.a)(Le,2),De=We[0],Pe=We[1],Be=c.a.useState(!1),qe=Object(d.a)(Be,2),Ge=qe[0],Ve=qe[1],Ke=Z.networks[i].contracts,$e=Ue(n,i,ee.abi,Ke.CNSRegistry),Je=Ue(n,i,ne.abi,Ke.UNSRegistry),Ye=Ue(n,i,re.abi,Ke.MintingManager),Xe=function(){je||(T(),ie(),de())},Qe=function(){var e=Object(W.a)(A.a.mark((function e(n,r){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.debug(t,r,n.id),de(),He(r)){e.next=5;break}return de("Recipient address is invalid"),e.abrupt("return");case 5:return e.prev=5,fe(!0),a=Je.address===n.registry?Je:$e,e.next=10,a["safeTransferFrom(address,address,uint256)"](t,r,n.id);case 10:return T(),e.next=13,cn(n);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(5),console.error(e.t0),de(e.t0&&e.t0.message),e.abrupt("return");case 20:return e.prev=20,fe(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,15,20,23]])})));return function(n,t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(W.a)(A.a.mark((function e(t,r){var a,c,i,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("UPDATE",t,r),we(),e.prev=2,Ne(!0),a=new v.a.providers.Web3Provider(n.provider),c=new v.a.Contract(t.resolver,te.abi,a.getSigner()),i=r.map((function(e){return e.key})),s=r.map((function(e){return e.newValue||""})),e.next=10,c.setMany(i,s,t.id);case 10:return Oe(),e.next=13,cn(t);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(2),console.error(e.t0),we(e.t0&&e.t0.message),e.abrupt("return");case 20:return e.prev=20,Ne(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,15,20,23]])})));return function(n,t){return e.apply(this,arguments)}}(),nn=function(){var e=Object(W.a)(A.a.mark((function e(n,t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("MINT",n,t),Pe(),e.prev=2,Ve(!0),e.next=6,Ye.claim(n,t);case 6:return Me(!1),e.next=9,an();case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0),Pe(e.t0&&e.t0.message),e.abrupt("return");case 16:return e.prev=16,Ve(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,11,16,19]])})));return function(n,t){return e.apply(this,arguments)}}(),tn=function(){var e=Object(W.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Initiating minting..."),e.next=3,Ye.paused();case 3:n=e.sent,Ee(!n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),an=function(){var e=Object(W.a)(A.a.mark((function e(){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!1),e.next=3,ln(i,t);case 3:n=e.sent,r=Object(D.a)(Object(D.a)({},j),{},Object(u.a)({},o,{isFetched:!0,domains:(n.domains||[]).sort((function(e,n){return e.name<n.name?-1:e.name>n.name?1:0}))})),console.debug("Update state",r),f(r),m(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cn=function(){var e=Object(W.a)(A.a.mark((function e(n){var t,r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn(i,n.id,!0);case 2:t=e.sent,r=j[o].domains.map((function(e){return t&&e.id===t.id?Object(D.a)(Object(D.a)({},e),t):e})).filter((function(e){return t||e.id!==n.id})),a=Object(D.a)(Object(D.a)({},j),{},Object(u.a)({},o,{isFetched:!0,domains:r})),console.debug("Update domain state",a),f(a),C(t);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){j[o]&&j[o].isFetched||(tn(),an())}),[j,o]);var sn,on=j&&(j[o]||{}).domains;return Object(r.jsxs)(g.a,{children:[on&&on.length?Object(r.jsxs)("div",{className:s.header,children:[Object(r.jsxs)(Y.a,{variant:"h5",component:"h6",className:s.grow,children:["Domains (",on.length,")"]}),Object(r.jsx)(P.a,{color:"primary",variant:"contained",disabled:!Fe,onClick:function(){Me(!0)},children:"Mint free domain"})]}):Object(r.jsx)(r.Fragment,{}),Object(r.jsx)(Ae,{chainId:i,isFetching:!x,domains:on,onEventsLoad:function(e){return console.debug("Loading DOMAIN events..."),(Je.address.toLowerCase()===e.registry?Je:$e).source.fetchEvents(e).then((function(e){return console.debug("Loaded DOMAIN events",e),{isFetched:!0,events:e||[]}}))},onDomainSelect:function(e){C(e),z()},actions:Object(r.jsxs)(r.Fragment,{children:[k&&k.resolver===me?Object(r.jsx)(P.a,{size:"small",color:"primary",onClick:(sn=k,Object(W.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("DEFAULT RESOLVER",sn.id),z(),e.prev=2,G(!0),e.next=6,$e.resolveTo(Ke.Resolver.address,sn.id);case 6:return e.next=8,cn(sn);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(2),console.error(e.t0),z(e.t0&&e.t0.message),e.abrupt("return");case 15:return e.prev=15,G(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,10,15,18]])})))),children:"Set default resolver"}):Object(r.jsx)(P.a,{size:"small",color:"primary",onClick:function(e){return function(){Oe(e),we()}}(k),children:"Update records"}),Object(r.jsx)(P.a,{size:"small",color:"primary",onClick:function(e){return function(){T(e)}}(k),children:"Transfer"}),Object(r.jsx)("div",{className:s.grow,children:R&&Object(r.jsx)(y.a,{severity:"error",children:R})}),Object(r.jsx)(P.a,{size:"small",color:"primary",onClick:function(e){return Object(W.a)(A.a.mark((function n(){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,cn(e);case 2:case"end":return n.stop()}}),n)})))}(k),children:Object(r.jsx)(Q.a,{})})]})}),Object(r.jsx)(U.a,{open:!!S,TransitionComponent:fn,maxWidth:"lg",keepMounted:!0,onClose:Xe,children:!!S&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(H.a,{children:["Transfer ",S.name]}),Object(r.jsxs)(q.a,{children:[Object(r.jsx)(K.a,{className:s.form,children:Object(r.jsx)(V.a,{label:"Receiver",variant:"outlined",size:"small",defaultValue:ce,className:s.grow,onChange:function(e){ie(e.target.value)}})}),le&&Object(r.jsx)(y.a,{severity:"error",style:{marginTop:10},children:le})]}),Object(r.jsxs)(B.a,{children:[Object(r.jsx)(P.a,{color:"primary",onClick:Xe,children:"Cancel"}),Object(r.jsx)(P.a,{color:"primary",variant:"contained",onClick:function(){Qe(S,ce)},children:"Transfer"})]}),Object(r.jsx)($.a,{className:s.backdrop,open:je,children:Object(r.jsx)(J.a,{color:"inherit"})})]})}),Object(r.jsx)(U.a,{open:!!xe,TransitionComponent:fn,maxWidth:"lg",keepMounted:!0,children:!!xe&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(H.a,{children:["Records [",xe.name,"]"]}),Object(r.jsx)(q.a,{children:Object(r.jsx)(en,{records:xe.records,updating:Ie,error:ye,onUpdate:function(e){Ze(xe,e)},onCancel:function(){Oe()}})})]})}),Object(r.jsxs)(U.a,{open:!!_e,TransitionComponent:fn,maxWidth:"lg",keepMounted:!0,children:[Object(r.jsx)(H.a,{children:"Mint free domain"}),Object(r.jsx)(q.a,{children:Object(r.jsx)(rn,{minting:Ge,onMint:function(e,n){nn(e,n)},onCancel:function(){Me(!1)},error:De})})]}),x&&j[o]&&j[o].domains&&!j[o].domains.length&&Object(r.jsxs)("p",{className:s.noDomains,children:["No domains found.",Object(r.jsx)(P.a,{color:"primary",variant:"contained",className:s.btn,disabled:!Fe,onClick:function(){Me(!0)},children:"Mint free domain"}),"OR ",Object(r.jsx)("a",{href:"https://unstoppabledomains.com/",children:"Buy here"})]}),Object(r.jsx)($.a,{className:s.backdrop,open:L,children:Object(r.jsx)(J.a,{color:"inherit"})})]})},xn=t(183),mn=t(424),On=t(222),vn=t.n(On),gn=t(407),yn=Object(h.a)((function(e){return{root:{marginTop:40,padding:"2px 4px",display:"flex",alignItems:"center"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},loader:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}}})),wn=function(e){var n=e.library,t=e.chainId,c=yn(),i=Object(j.f)().domain,s=Object(a.useState)(i),o=Object(d.a)(s,2),l=o[0],u=o[1],b=Object(a.useState)(void 0),f=Object(d.a)(b,2),h=f[0],p=f[1],x=Object(a.useState)(!0),m=Object(d.a)(x,2),O=m[0],w=m[1],k=Object(a.useState)(void 0),C=Object(d.a)(k,2),I=C[0],N=C[1],S=Z.networks[t].contracts,T=Ue(n,t,ee.abi,S.CNSRegistry),F=Ue(n,t,ne.abi,S.UNSRegistry),E=Ue(n,t,gn.abi,S.ProxyReader),R=Object.keys(Qe.keys);Object(a.useEffect)((function(){l&&z()}),[l]);var z=function(){var e=Object(W.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N(void 0),!h||l!==h.name){e.next=4;break}return e.abrupt("return");case 4:if(!v.a.utils.isHexString(l)||66!==l.length){e.next=11;break}return e.t0=u,e.next=8,_(l);case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 11:return p(void 0),n=v.a.utils.namehash(l),console.debug(l,n),e.next=16,M(n,l);case 16:e.next=21;break;case 18:e.prev=18,e.t2=e.catch(0),N(e.t2.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(W.a)(A.a.mark((function e(n){var t,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.exists(n);case 2:if(!e.sent){e.next=6;break}e.t0=F,e.next=7;break;case 6:e.t0=T;case 7:return t=e.t0,e.next=10,t.source.fetchNewURIEvents([n]);case 10:if((r=e.sent).length){e.next=13;break}throw new Error("Token not found");case 13:return e.abrupt("return",r.find((function(e){return e.args.tokenId.toHexString()===n})).args.uri);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=Object(W.a)(A.a.mark((function e(n,t){var r,a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),console.debug("Fetching state..."),e.next=4,E.callStatic.getData(R,n);case 4:r=e.sent,console.debug("Fetched state",r),a={},R.forEach((function(e,n){return a[e]=r[2][n]})),c={id:n,name:t,registry:r.resolver===F.address?F.address:T.address,type:r.resolver===F.address?"uns":"cns",owner:r.owner,resolver:r.resolver,records:a},console.debug("Update state",c),w(!0),p(c);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return Object(r.jsxs)(g.a,{style:{paddingTop:"3rem"},children:[Object(r.jsxs)(xn.a,{className:c.root,children:[Object(r.jsx)(mn.a,{error:!!I,className:c.input,onKeyPress:function(e){13===e.charCode&&z()},onChange:function(e){u(e.target.value)},placeholder:"Search domain (.crypto, .wallet, .bitcoin, .x, .888, .nft, .dao, .blockchain)",inputProps:{"aria-label":"search domain (.crypto, .wallet, .bitcoin, .x, .888, .nft, .dao, .blockchain)"},defaultValue:l,value:l}),Object(r.jsx)(Ve.a,{className:c.iconButton,onClick:z,"aria-label":"search",children:Object(r.jsx)(vn.a,{})})]}),I&&Object(r.jsx)(y.a,{severity:"error",children:I}),!O&&Object(r.jsx)("div",{className:c.loader,children:Object(r.jsx)(J.a,{color:"inherit"})}),O&&h&&Object(r.jsx)("div",{style:{marginTop:20},children:Object(r.jsx)(Ae,{chainId:t,isFetching:!O,domains:[h],onEventsLoad:function(e){return console.debug("Loading DOMAIN events..."),(F.address===e.registry?F:T).source.fetchEvents(e).then((function(e){return console.debug("Loaded DOMAIN events",e),{isFetched:!0,events:e||[]}}))}})})]})},kn=t(675),Cn=t(676),In=t(199),Nn=t(413),Sn=t.n(Nn),Tn=t(414),Fn=t.n(Tn),En=t(415),Rn=t.n(En),zn=t(67),_n=t(409),Mn=t.n(_n),Ln=Object(h.a)((function(){return{icon:{height:"1rem",width:"1rem",borderRadius:"1.125rem",borderColor:"black"}}}));function An(e){var n=e.account,t=e.size,c=void 0===t?16:t,i=Ln(),s=Object(a.useRef)();return Object(a.useEffect)((function(){n&&s.current&&(s.current.innerHTML="",s.current.appendChild(Mn()(c,parseInt(n.slice(2,10),16))))}),[n,c]),Object(r.jsx)("div",{className:i.icon,ref:s})}var Wn=t(667),Dn=t(410),Pn=t(411),Un=t.n(Pn),Bn=Object(h.a)((function(){return{modal:{padding:20},box:{display:"flex"},account:{paddingLeft:8},btn:{marginTop:10,width:"100%"}}}));function qn(e){var n=e.anchorEl,t=e.onClose,a=Bn(),c=Object(x.c)(),i=c.account,s=c.deactivate,o=c.connector,l=Boolean(n),d=function(){t&&t()};return Object(r.jsx)(Wn.a,{open:l,anchorEl:n,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(r.jsxs)(g.a,{className:a.modal,children:[Object(r.jsxs)(fe.a,{className:a.box,children:[Object(r.jsx)(An,{account:i,size:20}),Object(r.jsx)(Y.a,{className:a.account,children:i&&"".concat(i.slice(0,6),"...").concat(i.slice(i.length-4,i.length))}),Object(r.jsx)(Dn.CopyToClipboard,{text:i,children:Object(r.jsx)(Un.a,{fontSize:"small",style:{marginLeft:6,cursor:"pointer"}})})]}),Object(r.jsx)(P.a,{size:"small",className:a.btn,onClick:function(){s(),o.close&&o.close(),d()},children:"Disconnect"})]})})}var Hn=t(412),Gn=t.n(Hn),Vn=t.p+"static/media/mm.ff38276e.png",Kn=t.p+"static/media/wc.304e3277.svg",$n=t.p+"static/media/cw.a3a7d7fd.svg",Jn={MetaMask:z,WalletConnect:_,"Coinbase Wallet":M},Yn={MetaMask:Vn,WalletConnect:Kn,"Coinbase Wallet":$n},Xn=Object(h.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},btn:{minWidth:300,padding:16,justifyContent:"flex-start",textTransform:"none"},grow:{flexGrow:1},img:{width:"auto",maxWidth:26,maxHeight:24,margin:"0 auto"}}})),Qn=c.a.forwardRef((function(e,n){return Object(r.jsx)(G.a,Object(D.a)({direction:"up",ref:n},e))})),Zn=function(e){var n=Xn(),t=e.children,a=e.onClose,c=Object(ae.a)(e,["children","onClose"]);return Object(r.jsxs)(H.a,Object(D.a)(Object(D.a)({disableTypography:!0,className:n.root},c),{},{children:[Object(r.jsx)(Y.a,{variant:"h6",children:t}),a?Object(r.jsx)(Ve.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(r.jsx)(Gn.a,{})}):null]}))};function et(e){var n=e.isOpen,t=e.onClose,a=Xn(),c=Object(x.c)().activate,i=function(){t&&t()};return Object(r.jsxs)(U.a,{open:n,onClose:i,TransitionComponent:Qn,maxWidth:"lg",keepMounted:!0,children:[Object(r.jsx)(Zn,{onClose:i,children:"Connect to a wallet"}),Object(r.jsx)(q.a,{children:Object.keys(Jn).map((function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)(P.a,{onClick:function(){c(Jn[e])},className:a.btn,children:[Object(r.jsx)(Y.a,{variant:"body1",children:e}),Object(r.jsx)("div",{className:a.grow}),Object(r.jsx)("img",{src:Yn[e],alt:e,className:a.img})]})},e)}))})]})}var nt=Object(h.a)((function(e){return{box_net:{display:"flex",alignItems:"center",background:e.palette.grey[200],borderRadius:6,padding:8,marginRight:8},box_acc:{display:"flex",alignItems:"center",background:e.palette.grey[300],borderRadius:6,paddingLeft:8},info_btn:{margin:"2px 2px 2px 6px",background:e.palette.grey[500],color:"white",textTransform:"none"},info_btn_text:{paddingRight:6},connect_btn:{background:e.palette.grey[400]}}}));function tt(){var e=nt(),n=Object(x.c)(),t=n.account,a=n.library,i=n.chainId,s=c.a.useState(),o=Object(d.a)(s,2),l=o[0],u=o[1],b=c.a.useState(null),j=Object(d.a)(b,2),f=j[0],h=j[1],p=c.a.useState(),m=Object(d.a)(p,2),O=m[0],v=m[1];return c.a.useEffect((function(){if(t&&a){var e=!1;return a.getBalance(t).then((function(n){e||u(n)})).catch((function(){e||u(null)})),function(){e=!0,u(void 0)}}}),[t,a,i]),t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(fe.a,{className:e.box_net,children:Object(r.jsx)(Y.a,{children:Oe[i]||i})}),Object(r.jsxs)(fe.a,{className:e.box_acc,children:[l&&parseFloat(Object(zn.b)(l)).toFixed(3)," ETH",Object(r.jsxs)(P.a,{className:e.info_btn,onClick:function(e){return h(e.currentTarget)},children:[Object(r.jsx)(Y.a,{className:e.info_btn_text,children:t&&"".concat(t.slice(0,6),"...").concat(t.slice(t.length-4,t.length))}),Object(r.jsx)(An,{account:t})]}),Object(r.jsx)(qn,{anchorEl:f,onClose:function(){return h(null)}})]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P.a,{className:e.connect_btn,onClick:function(){return v(!0)},children:"Connect to a wallet"}),Object(r.jsx)(et,{isOpen:O,onClose:function(){return v(!1)}})]})}var rt=Object(h.a)((function(e){return{title:Object(u.a)({fontSize:"1rem",color:e.palette.grey[800],textDecoration:"none"},e.breakpoints.up("sm"),{fontSize:"1.5rem"}),grow:{flexGrow:1,paddingLeft:30},navBtn:{color:e.palette.grey[800],marginLeft:6,padding:"6px 0",minWidth:"inherit",textDecoration:"none"},menuLink:{color:"inherit",textDecoration:"none"}}}));function at(e){var n=e.active,t=rt(),c=Object(a.useState)(null),i=Object(d.a)(c,2),s=i[0],o=i[1],l=Boolean(s),u=function(){o(null)};return Object(r.jsx)("header",{children:Object(r.jsx)(kn.a,{position:"fixed",color:"inherit",children:Object(r.jsxs)(Cn.a,{children:[Object(r.jsx)(b.b,{to:"/",className:t.title,children:Object(r.jsx)(Y.a,{variant:"h5",noWrap:!0,children:"Web3 Domain Manager (beta)"})}),Object(r.jsx)("div",{className:t.grow}),Object(r.jsx)(tt,{}),Object(r.jsx)(P.a,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":l?"true":void 0,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},className:t.navBtn,children:Object(r.jsx)(Sn.a,{})}),Object(r.jsxs)(In.a,{anchorEl:s,open:l,onClose:u,onClick:u,PaperProps:{style:{transform:"translateX(10px) translateY(50px)",width:180}},children:[Object(r.jsxs)(nn.a,{component:b.b,to:"/lookup",disabled:!n,children:[Object(r.jsx)("div",{style:{flexGrow:1},children:"Lookup"}),Object(r.jsx)(vn.a,{})]}),Object(r.jsx)("a",{href:"//dune.xyz/aquiladev/uns",target:"_blank",rel:"noreferrer",className:t.menuLink,children:Object(r.jsxs)(nn.a,{children:[Object(r.jsx)("div",{style:{flexGrow:1},children:"UNS stats"}),Object(r.jsx)(Fn.a,{})]})}),Object(r.jsx)("a",{href:"//github.com/aquiladev/web3-domain-manager",target:"_blank",rel:"noreferrer",className:t.menuLink,children:Object(r.jsxs)(nn.a,{children:[Object(r.jsx)("div",{style:{flexGrow:1},children:"Code"}),Object(r.jsx)(Rn.a,{})]})})]})]})})})}var ct=t(227),it=Object(h.a)((function(){return{footer:{alignItems:"center",background:"transparent",boxShadow:"none"},info:{marginTop:20}}}));function st(){var e=it();return Object(r.jsxs)(kn.a,{position:"static",className:e.footer,children:[Object(r.jsx)(Y.a,{color:"textSecondary",variant:"subtitle2",className:e.info,children:"This is an open-source project for managing blockchain domains. It uses Ethereum/Polygon blockchain and TheGraph as data sources."}),Object(r.jsxs)(Cn.a,{children:[Object(r.jsx)("span",{style:{marginRight:12},children:Object(r.jsx)(ct.a,{href:"https://github.com/aquiladev/web3-domain-manager","data-icon":"octicon-star","data-size":"large","aria-label":"Star aquiladev/web3-domain-manager on GitHub",children:"Star"})}),Object(r.jsx)("span",{style:{marginRight:12},children:Object(r.jsx)(ct.a,{href:"https://github.com/aquiladev/web3-domain-manager/issues","data-icon":"octicon-issue-opened","data-size":"large","aria-label":"Issue aquiladev/web3-domain-manager on GitHub",children:"Issue"})}),Object(r.jsx)("span",{style:{marginRight:12},children:Object(r.jsx)(ct.a,{href:"https://github.com/aquiladev","data-size":"large","aria-label":"Follow @aquiladev on GitHub",children:"Follow @aquiladev"})}),Object(r.jsxs)(Y.a,{color:"textSecondary",variant:"subtitle2",children:["version: ","main.1d8cb06"]})]})]})}function ot(e){var n=e.chainId;return Object(r.jsx)(r.Fragment,{children:4===n?Object(r.jsx)(y.a,{variant:"filled",severity:"warning",style:{marginTop:10},children:"Rinkeby network support is deprecated, it will be disabled soon."}):""})}var lt=Object(f.a)({overrides:{MuiFilledInput:{input:{paddingTop:"13px"}},MuiDialogActions:{root:{display:"block"}}}}),dt=Object(h.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",minHeight:"100%"},content:{paddingTop:64,minHeight:100},title:Object(u.a)({fontSize:"1rem"},e.breakpoints.up("sm"),{fontSize:"1.5rem"}),backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},grow:{flexGrow:1,paddingLeft:30},navButton:{color:"white"}}}));function ut(e){return console.error(e),e instanceof m.b?"No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.":e instanceof x.a?"You're connected to an unsupported network.":e instanceof m.c||e instanceof O.a?"Please authorize this website to access your Ethereum account.":"An unknown error occurred. Check the console for more details."}function bt(e){return new v.a.providers.Web3Provider(e)}function jt(){var e=dt(),n=Object(x.c)(),t=n.connector,c=n.library,i=n.account,s=n.chainId,o=n.active,l=n.error,u=Object(a.useState)(),f=Object(d.a)(u,2),h=f[0],m=f[1];return Object(a.useEffect)((function(){h&&h===t&&m(void 0)}),[h,t]),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(x.c)(),t=n.active,r=n.error,c=n.activate;Object(a.useEffect)((function(){var n=window.ethereum;if(n&&n.on&&!t&&!r&&!e){var a=function(){console.log("Handling 'connect' event"),c(z)},i=function(e){console.log("Handling 'chainChanged' event with payload",e),c(z)},s=function(e){console.log("Handling 'accountsChanged' event with payload",e),e.length>0&&c(z)},o=function(e){console.log("Handling 'networkChanged' event with payload",e),c(z)};return n.on("connect",a),n.on("chainChanged",i),n.on("accountsChanged",s),n.on("networkChanged",o),function(){n.removeListener&&(n.removeListener("connect",a),n.removeListener("chainChanged",i),n.removeListener("accountsChanged",s),n.removeListener("networkChanged",o))}}}),[t,r,e,c])}(!function(){var e=Object(x.c)(),n=e.activate,t=e.active,r=Object(a.useState)(!1),c=Object(d.a)(r,2),i=c[0],s=c[1];return Object(a.useEffect)((function(){z.isAuthorized().then((function(e){e?n(z,void 0,!0).catch((function(){s(!0)})):s(!0)}))}),[]),Object(a.useEffect)((function(){!i&&t&&s(!0)}),[i,t]),i}()||!!h),Object(r.jsx)(p.a,{theme:lt,children:Object(r.jsx)(b.a,{children:Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(at,{active:o,account:i}),Object(r.jsxs)(g.a,{maxWidth:"lg",className:e.content,children:[Object(r.jsx)(ot,{chainId:s}),!!l&&Object(r.jsx)(y.a,{variant:"filled",severity:"error",style:{position:"fixed",zIndex:1200,bottom:10,left:10},children:ut(l)}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{path:"/lookup/:domain",children:o&&Object(r.jsx)(wn,{library:c,chainId:s})}),Object(r.jsx)(j.a,{path:"/lookup",children:o&&Object(r.jsx)(wn,{library:c,chainId:s})}),Object(r.jsx)(j.a,{path:"/",children:i&&Object(r.jsx)(pn,{library:c,account:i,chainId:s})})]})]}),Object(r.jsx)(st,{})]})})})}var ft=function(){return Object(r.jsxs)(x.b,{getLibrary:bt,children:[Object(r.jsx)(S,{}),Object(r.jsx)(jt,{})]})},ht=t(228),pt=t(272),xt=t.n(pt),mt=t(416),Ot=Object(h.a)((function(e){return{root:{flexGrow:1,overflow:"hidden"},title:Object(u.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),content:{paddingTop:64,minHeight:100},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},grow:{flexGrow:1,paddingLeft:30},navButton:{color:"white"}}})),vt={mainnet:1,goerli:5};function gt(){var e=Ot(),n=Object(pt.useSafeAppsSDK)(),t=n.sdk,c=n.safe,i=vt[c.network.toLowerCase()],s=Object(a.useMemo)((function(){return new v.a.providers.Web3Provider(new mt.SafeAppProvider(c,t),i)}),[t,c,i]);return Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(kn.a,{position:"fixed",children:Object(r.jsxs)(Cn.a,{children:[Object(r.jsx)(Y.a,{className:e.title,variant:"h5",noWrap:!0,children:"Web3 Domain Manager (beta)"}),Object(r.jsx)("div",{className:e.grow}),Object(r.jsx)(Y.a,{variant:"subtitle1",children:c.safeAddress})]})}),Object(r.jsxs)(g.a,{maxWidth:"lg",className:e.content,children:[Object(r.jsx)(ot,{chainId:i}),Object(r.jsx)(pn,{library:s,account:c.safeAddress,chainId:i})]})]})}var yt=function(){return Object(r.jsx)(k.ThemeProvider,{theme:ht.theme,children:Object(r.jsxs)(xt.a,{loader:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ht.Title,{size:"md",children:"Waiting for Gnosis Safe..."}),Object(r.jsx)(ht.Loader,{size:"md"})]}),children:[Object(r.jsx)(S,{}),Object(r.jsx)(gt,{})]})})},wt=function(){return Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_REF_SHA:"main.1d8cb06"}).REACT_APP_SAPP_TARGET?Object(r.jsx)(yt,{}):Object(r.jsx)(ft,{})},kt=function(e){e&&e instanceof Function&&t.e(7).then(t.bind(null,1078)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))};l.a.initialize("G-E307TY909N"),l.a.send({hitType:"pageview",page:window.location.pathname+window.location.search}),s.a.render(Object(r.jsx)(a.StrictMode,{children:Object(r.jsx)(wt,{})}),document.getElementById("root")),kt()}},[[604,2,3]]]);
//# sourceMappingURL=main.f3aac32e.chunk.js.map